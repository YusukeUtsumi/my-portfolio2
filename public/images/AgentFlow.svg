<?xml version="1.0" encoding="UTF-8"?>
<svg
    xmlns="http://www.w3.org/2000/svg"
    xmlns:xlink="http://www.w3.org/1999/xlink"
    viewBox="0 0 1600 1400"
    role="img"
    aria-labelledby="desc">
    <desc id="desc">Orchestration-themed animated flowchart. Central hub conducts three lanes to service groups. Transparent background, cyan glow, 16:14 ratio.</desc>

    <!-- ========== Styles ========== -->
    <style>
        :root {
            --line: #00e5ff;
            --glow: rgba(0, 229, 255, .55);
            --node-fill: #0f0f10;
            --node-stroke: rgba(255,255,255,.14);
        }

        .frame {
            fill: transparent;
            stroke: rgba(255,255,255,.10);
            stroke-width: 1;
            rx: 22;
            filter: drop-shadow(0 22px 44px rgba(0,0,0,.45));
        }

        .hub {
            fill: url(#hubGrad);
            stroke: rgba(255,255,255,.16);
            stroke-width: 1.4;
            filter: url(#softGlow);
        }

        .node {
            fill: url(#nodeGrad);
            stroke: var(--node-stroke);
            stroke-width: 1.2;
            rx: 18;
            filter: url(#softGlow);
        }

        .service {
            fill: url(#svcGrad);
            stroke: rgba(255,255,255,.10);
            stroke-width: 1.1;
            rx: 14;
            filter: url(#softGlow);
        }

        .wire {
            fill: none;
            stroke: var(--line);
            stroke-width: 2.4;
            opacity: .95;
            filter: url(#wireGlow);
            stroke-linecap: round;
            stroke-linejoin: round;
        }

        .dashFlow {
            stroke-dasharray: 14 18;
            animation: dash 3.0s linear infinite;
        }

        .runner {
            fill: #cfffff;
            filter: drop-shadow(0 0 8px var(--glow));
            opacity: .95;
        }

        .pulse {
            animation: pulse 2.4s ease-in-out infinite;
        }

        @keyframes dash {
            0%   { stroke-dashoffset: 0; }
            100% { stroke-dashoffset: -380; }
        }

        @keyframes pulse {
            0%, 100% { opacity: .72; }
            50%      { opacity: 1; }
        }

        @media (prefers-reduced-motion: reduce) {
            .dashFlow, .runner, .pulse { animation: none !important; }
        }
    </style>

    <!-- ========== Defs ========== -->
    <defs>
        <!-- 柔らかい発光 -->
        <filter id="softGlow" x="-40%" y="-40%" width="180%" height="180%">
            <feGaussianBlur in="SourceGraphic" stdDeviation="1.6" result="b"/>
            <feColorMatrix in="b" type="matrix"
                values="0 0 0 0 0
                        0 0 0 0 0.84
                        0 0 0 0 1
                        0 0 0 0.55 0" result="c"/>
            <feMerge>
                <feMergeNode in="c"/>
                <feMergeNode in="SourceGraphic"/>
            </feMerge>
        </filter>

        <!-- 配線グロー -->
        <filter id="wireGlow" x="-40%" y="-40%" width="180%" height="180%">
            <feGaussianBlur stdDeviation="2.2" result="g"/>
            <feMerge>
                <feMergeNode in="g"/>
                <feMergeNode in="SourceGraphic"/>
            </feMerge>
        </filter>

        <!-- グラデーション -->
        <linearGradient id="hubGrad" x1="0" y1="0" x2="1" y2="1">
            <stop offset="0" stop-color="#14171b"/>
            <stop offset="1" stop-color="#0f1012"/>
        </linearGradient>
        <linearGradient id="nodeGrad" x1="0" y1="0" x2="1" y2="1">
            <stop offset="0" stop-color="#15171a"/>
            <stop offset="1" stop-color="#0f1012"/>
        </linearGradient>
        <linearGradient id="svcGrad" x1="0" y1="0" x2="1" y2="1">
            <stop offset="0" stop-color="#141519"/>
            <stop offset="1" stop-color="#0e0f11"/>
        </linearGradient>

        <!-- ランナー軌道（16:14高さに最適化） -->
        <path id="pLaneL" d="M800 760 C 640 760, 520 800, 420 900 S 260 1060, 220 1120" />
        <path id="pLaneC" d="M800 760 C 800 820, 800 920, 800 1000 S 800 1120, 800 1220" />
        <path id="pLaneR" d="M800 760 C 960 760, 1080 800, 1180 900 S 1340 1060, 1380 1120" />
        <path id="pMerge"  d="M220 1120 C 520 1260, 1080 1260, 1380 1120" />
    </defs>

    <!-- ========== Outer Frame（任意・透過） ========== -->
    <rect class="frame" x="20" y="20" width="1560" height="1360" />

    <!-- ========== Central Conductor (Hub) ========== -->
    <!-- 画面中央やや上（縦の中点=700の少し下）にハブ -->
    <g transform="translate(800, 720)">
        <circle class="hub pulse" r="86" />
        <!-- バトン風ライン -->
        <path class="wire" d="M-12 -12 L 54 -54" />
        <path class="wire dashFlow" d="M-12 -12 L 54 -54" />
    </g>

    <!-- ========== Orchestrated Nodes（ハブ周辺） ========== -->
    <rect class="node" x="640" y="640" width="120" height="56" rx="16"/>
    <rect class="node" x="840" y="640" width="120" height="56" rx="16"/>
    <rect class="node" x="740" y="820" width="120" height="56" rx="16"/>

    <!-- ========== Lanes（左・中央・右） ========== -->
    <g id="lanes">
        <path class="wire" d="M800 760 C 640 760, 520 800, 420 900 S 260 1060, 220 1120" />
        <path class="wire dashFlow" d="M800 760 C 640 760, 520 800, 420 900 S 260 1060, 220 1120" />

        <path class="wire" d="M800 760 C 800 820, 800 920, 800 1000 S 800 1120, 800 1220" />
        <path class="wire dashFlow" d="M800 760 C 800 820, 800 920, 800 1000 S 800 1120, 800 1220" />

        <path class="wire" d="M800 760 C 960 760, 1080 800, 1180 900 S 1340 1060, 1380 1120" />
        <path class="wire dashFlow" d="M800 760 C 960 760, 1080 800, 1180 900 S 1340 1060, 1380 1120" />
    </g>

    <!-- ========== Services（終端群） ========== -->
    <!-- 左 -->
    <g>
        <rect class="service" x="140" y="1080" width="120" height="60"/>
        <rect class="service" x="200" y="1200" width="120" height="60"/>
    </g>
    <!-- 中央 -->
    <g>
        <rect class="service" x="740" y="1100" width="120" height="60"/>
        <rect class="service" x="820" y="1240" width="120" height="60"/>
    </g>
    <!-- 右 -->
    <g>
        <rect class="service" x="1320" y="1080" width="120" height="60"/>
        <rect class="service" x="1260" y="1200" width="120" height="60"/>
    </g>

    <!-- ========== Merge（左右合流） ========== -->
    <path class="wire" d="M220 1120 C 520 1260, 1080 1260, 1380 1120" />
    <path class="wire dashFlow" d="M220 1120 C 520 1260, 1080 1260, 1380 1120" />

    <!-- ========== Runners（流れる粒子） ========== -->
    <g id="runners">
        <circle class="runner" r="5">
            <animateMotion dur="3.2s" repeatCount="indefinite" rotate="auto">
                <mpath xlink:href="#pLaneL"/>
            </animateMotion>
        </circle>
        <circle class="runner" r="5">
            <animateMotion dur="2.9s" begin=".6s" repeatCount="indefinite" rotate="auto">
                <mpath xlink:href="#pLaneC"/>
            </animateMotion>
        </circle>
        <circle class="runner" r="5">
            <animateMotion dur="3.1s" begin="1.0s" repeatCount="indefinite" rotate="auto">
                <mpath xlink:href="#pLaneR"/>
            </animateMotion>
        </circle>
        <circle class="runner" r="5">
            <animateMotion dur="2.6s" begin="1.2s" repeatCount="indefinite" rotate="auto">
                <mpath xlink:href="#pMerge"/>
            </animateMotion>
        </circle>
    </g>
</svg>
